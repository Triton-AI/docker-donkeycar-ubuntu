FROM tensorflow/tensorflow:2.2.0
# If you have a Nvidia GPU
# FROM tensorflow/tensorflow:2.2.0-gpu

# Install softwares
RUN apt-get update && apt-get install -y python=3.7 python3-pip git nano rsync zip
# Python packages

RUN python3 -m pip install --upgrade pip
RUN python3 -m pip install opencv-python --upgrade

# Install donkeycar
RUN apt-get install -y h5py pillow matplotlib tornado docopt pandas pylint pytest \
    pytest-cov codecov pip imgaug progress moviepy paho-mqtt PrettyTable pyfiglet mypy \
    pytorch=1.7.1 torchvision torchaudio pytorch-lightning numpy psutil
RUN git clone https://github.com/autorope/donkeycar && \
    cd donkeycar && \
    git checkout master && \
    pip install -e .[pc]
RUN cd / && \
    git clone https://github.com/tawnkramer/gym-donkeycar &&\
    pip install -e gym-donkeycar

# Create a car
RUN mkdir -p /donkeys
RUN cd / && \
    donkey createcar --path /donkeys/mycar
